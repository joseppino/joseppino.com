import{x as Y,y as Z,p as M,i as $,s as N,n as g,z as A,r as tt,A as et,e as R,B as D}from"../chunks/scheduler.B720Wybo.js";import{v as ot,o as C,r as lt,n as y,S as V,i as j,a as L,f as I,h as k,e as b,s as G,c as v,j as E,b as z,g as H,d as m,u as st,l as w,q as P,B as nt,C as ct,p as F,D as B,x as K,y as Q,z as W,A as X}from"../chunks/index.Ctv-Nbzx.js";import{e as q}from"../chunks/each.D6YF6ztN.js";import{s as rt}from"../chunks/supabaseClient.BQrSqomd.js";function at(s,t){const o=t.token={};function e(n,c,l,r){if(t.token!==o)return;t.resolved=r;let i=t.ctx;l!==void 0&&(i=i.slice(),i[l]=r);const f=n&&(t.current=n)(i);let _=!1;t.block&&(t.blocks?t.blocks.forEach((u,p)=>{p!==c&&u&&(ot(),C(u,1,1,()=>{t.blocks[p]===u&&(t.blocks[p]=null)}),lt())}):t.block.d(1),f.c(),y(f,1),f.m(t.mount(),t.anchor),_=!0),t.block=f,t.blocks&&(t.blocks[c]=f),_&&$()}if(Y(s)){const n=Z();if(s.then(c=>{M(n),e(t.then,1,t.value,c),M(null)},c=>{if(M(n),e(t.catch,2,t.error,c),M(null),!t.hasCatch)throw c}),t.current!==t.pending)return e(t.pending,0),!0}else{if(t.current!==t.then)return e(t.then,1,t.value,s),!0;t.resolved=s}}function it(s,t,o){const e=t.slice(),{resolved:n}=s;s.current===s.then&&(e[s.value]=n),s.current===s.catch&&(e[s.error]=n),s.block.p(e,o)}function O(s){let t,o,e,n,c,l,r="Close Ã—",i,f;return{c(){t=b("dialog"),o=b("div"),e=b("img"),c=G(),l=b("button"),l.textContent=r,this.h()},l(_){t=v(_,"DIALOG",{class:!0});var u=E(t);o=v(u,"DIV",{class:!0});var p=E(o);e=v(p,"IMG",{class:!0,src:!0,alt:!0}),c=z(p),l=v(p,"BUTTON",{type:!0,class:!0,style:!0,"data-svelte-h":!0}),H(l)!=="svelte-eiqpci"&&(l.textContent=r),p.forEach(k),u.forEach(k),this.h()},h(){m(e,"class","modal-img svelte-8fs7xy"),A(e.src,n=s[1])||m(e,"src",n),m(e,"alt",""),m(l,"type","button"),m(l,"class","pure-button svelte-8fs7xy"),l.autofocus=!0,st(l,"font-size","70%"),m(o,"class","svelte-8fs7xy"),m(t,"class","svelte-8fs7xy")},m(_,u){I(_,t,u),w(t,o),w(o,e),w(o,c),w(o,l),s[5](t),l.focus(),i||(f=[P(l,"click",s[4]),P(o,"click",nt(s[3])),P(t,"close",s[6]),P(t,"click",ct(s[7]))],i=!0)},p(_,u){u&2&&!A(e.src,n=_[1])&&m(e,"src",n)},d(_){_&&k(t),s[5](null),i=!1,tt(f)}}}function ht(s){let t,o=s[1]&&O(s);return{c(){o&&o.c(),t=L()},l(e){o&&o.l(e),t=L()},m(e,n){o&&o.m(e,n),I(e,t,n)},p(e,[n]){e[1]?o?o.p(e,n):(o=O(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null)},i:g,o:g,d(e){e&&k(t),o&&o.d(e)}}}function ut(s,t,o){let{showModal:e}=t,{photoURI:n}=t,c;function l(u){et.call(this,s,u)}const r=()=>c.close();function i(u){R[u?"unshift":"push"](()=>{c=u,o(2,c)})}const f=()=>{o(0,e=!1),o(1,n="")},_=()=>c.close();return s.$$set=u=>{"showModal"in u&&o(0,e=u.showModal),"photoURI"in u&&o(1,n=u.photoURI)},s.$$.update=()=>{s.$$.dirty&5&&c&&e&&c.showModal()},[e,n,c,l,r,i,f,_]}class dt extends V{constructor(t){super(),j(this,t,ut,ht,N,{showModal:0,photoURI:1})}}function T(s,t,o){const e=s.slice();return e[4]=t[o],e}function J(s,t,o){const e=s.slice();return e[7]=t[o],e}function S(s){let t,o,e,n;function c(){return s[3](s[7])}return{c(){t=b("img"),this.h()},l(l){t=v(l,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){m(t,"class","pure-img grow svelte-1rslq8u"),A(t.src,o=s[7])||m(t,"src",o),m(t,"alt","")},m(l,r){I(l,t,r),e||(n=P(t,"click",c),e=!0)},p(l,r){s=l},d(l){l&&k(t),e=!1,n()}}}function x(s){let t,o=q(s[4]),e=[];for(let n=0;n<o.length;n+=1)e[n]=S(J(s,o,n));return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=L()},l(n){for(let c=0;c<e.length;c+=1)e[c].l(n);t=L()},m(n,c){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(n,c);I(n,t,c)},p(n,c){if(c&3){o=q(n[4]);let l;for(l=0;l<o.length;l+=1){const r=J(n,o,l);e[l]?e[l].p(r,c):(e[l]=S(r),e[l].c(),e[l].m(t.parentNode,t))}for(;l<e.length;l+=1)e[l].d(1);e.length=o.length}},d(n){n&&k(t),F(e,n)}}}function ft(s){let t,o=q(s[1]),e=[];for(let n=0;n<o.length;n+=1)e[n]=x(T(s,o,n));return{c(){t=b("div");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=v(n,"DIV",{class:!0});var c=E(t);for(let l=0;l<e.length;l+=1)e[l].l(c);c.forEach(k),this.h()},h(){m(t,"class","grid svelte-1rslq8u")},m(n,c){I(n,t,c);for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(t,null)},p(n,[c]){if(c&3){o=q(n[1]);let l;for(l=0;l<o.length;l+=1){const r=T(n,o,l);e[l]?e[l].p(r,c):(e[l]=x(r),e[l].c(),e[l].m(t,null))}for(;l<e.length;l+=1)e[l].d(1);e.length=o.length}},i:g,o:g,d(n){n&&k(t),F(e,n)}}}function _t(s,t){let o=[];for(let e=0;e<s.length;e+=t){const n=s.slice(e,e+t);o.push(n)}return o}function pt(s,t,o){let{photoUriList:e}=t,{clickedPhotoUri:n=""}=t,c=_t(e,3);console.log(c);const l=r=>o(0,n=r);return s.$$set=r=>{"photoUriList"in r&&o(2,e=r.photoUriList),"clickedPhotoUri"in r&&o(0,n=r.clickedPhotoUri)},[n,c,e,l]}class gt extends V{constructor(t){super(),j(this,t,pt,ft,N,{photoUriList:2,clickedPhotoUri:0})}}function mt(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function kt(s){let t,o,e;function n(l){s[5](l)}let c={photoUriList:Ut(s[2])};return s[0]!==void 0&&(c.clickedPhotoUri=s[0]),t=new gt({props:c}),R.push(()=>B(t,"clickedPhotoUri",n)),{c(){K(t.$$.fragment)},l(l){Q(t.$$.fragment,l)},m(l,r){W(t,l,r),e=!0},p(l,r){const i={};!o&&r&1&&(o=!0,i.clickedPhotoUri=l[0],D(()=>o=!1)),t.$set(i)},i(l){e||(y(t.$$.fragment,l),e=!0)},o(l){C(t.$$.fragment,l),e=!1},d(l){X(t,l)}}}function bt(s){let t,o="Loading...";return{c(){t=b("h3"),t.textContent=o},l(e){t=v(e,"H3",{"data-svelte-h":!0}),H(t)!=="svelte-1kiwilm"&&(t.textContent=o)},m(e,n){I(e,t,n)},p:g,i:g,o:g,d(e){e&&k(t)}}}function vt(s){let t,o,e="Photos",n,c,l,r,i,f;function _(h){s[3](h)}function u(h){s[4](h)}let p={};s[1]!==void 0&&(p.showModal=s[1]),s[0]!==void 0&&(p.photoURI=s[0]),c=new dt({props:p}),R.push(()=>B(c,"showModal",_)),R.push(()=>B(c,"photoURI",u));let a={ctx:s,current:null,token:null,hasCatch:!1,pending:bt,then:kt,catch:mt,value:2,blocks:[,,,]};return at(s[2],a),{c(){t=b("div"),o=b("h1"),o.textContent=e,n=G(),K(c.$$.fragment),i=G(),a.block.c(),this.h()},l(h){t=v(h,"DIV",{class:!0});var d=E(t);o=v(d,"H1",{"data-svelte-h":!0}),H(o)!=="svelte-1clfsxh"&&(o.textContent=e),n=z(d),Q(c.$$.fragment,d),i=z(d),a.block.l(d),d.forEach(k),this.h()},h(){m(t,"class","content")},m(h,d){I(h,t,d),w(t,o),w(t,n),W(c,t,null),w(t,i),a.block.m(t,a.anchor=null),a.mount=()=>t,a.anchor=null,f=!0},p(h,[d]){s=h;const U={};!l&&d&2&&(l=!0,U.showModal=s[1],D(()=>l=!1)),!r&&d&1&&(r=!0,U.photoURI=s[0],D(()=>r=!1)),c.$set(U),it(a,s,d)},i(h){f||(y(c.$$.fragment,h),y(a.block),f=!0)},o(h){C(c.$$.fragment,h);for(let d=0;d<3;d+=1){const U=a.blocks[d];C(U)}f=!1},d(h){h&&k(t),X(c),a.block.d(),a.token=null,a=null}}}function Ut(s){for(var t=s.length-1;t>0;t--){var o=Math.floor(Math.random()*(t+1)),e=s[t];s[t]=s[o],s[o]=e}return s}function wt(s,t,o){async function e(a){const h=await rt.storage.from("photos").list(a,{limit:20,offset:0});if(h.error)throw console.log(h.error.message),new Error(h.error.message);return h.data}async function n(a){let h=[];return(await e(a)).forEach(U=>{U.name.toUpperCase().includes(".JP")&&h.push(`https://nuyavgdfgnfsizjcvrds.supabase.co/storage/v1/object/public/photos/${a}/${U.name}`)}),h}async function c(){let a=await n("portrait"),h=await n("landscape");return[...a,...h]}let l=c(),r=!1,i;function f(a){o(0,i=a),o(1,r=!0)}function _(a){r=a,o(1,r)}function u(a){i=a,o(0,i)}function p(a){i=a,o(0,i)}return s.$$.update=()=>{s.$$.dirty&1&&f(i)},[i,r,l,_,u,p]}class Ct extends V{constructor(t){super(),j(this,t,wt,vt,N,{})}}export{Ct as component};
